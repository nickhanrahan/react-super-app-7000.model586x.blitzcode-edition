# w3b 4ppl1c4t10n

## Client-Server Model

Ok guys so basically we use a [client-server model](https://en.wikipedia.org/wiki/Client%E2%80%93server_model) which is two servers: one for a client application and one for an API server application, which means this is a monorepo with two projects. You got it?

## Tree Structure

```bash
.
├── client - Client app project
│   ├── config - Build configuration files (webpack)
│   ├── public - Files/assets available to client
│   ├── src - Contains all code for client app
│   │   ├── index.tsx - Entry point for browser bundle
│   │   ├── app - All React components
│   │   │   └── app.tsx - Entry point for primary React node
│   │   └── shared - Shared/reusable React components
│   │       └── theme - Theme/CSS
│   │   ├── gql - GraphQL related items
│   │   │   ├── generated - Autogenerated files by graphql-codegen
│   │   │   └── operations - Query definitions
│   │   ├── routes - Routing files
│   │   ├── server - For server-side rendering
│   │   │   ├── html.tsx - HTML component where code is injected
│   │   │   ├── server.ts - Entry point for server-side rendering of client application, contains express server
│   │   │   └── serverRenderer.tsx - Function to handle initial client request for application
│   ├── package.json
│   ├── .eslintrc.js - ESLint configuration
│   ├── .prettierrc.js - Configuration to make code pretty
│   ├── codegen.ts - Configuration for graphql-codegen
│   └── Dockerfile - To build a Docker image
├── server - Server app project
│   ├── src - Contains all code for server app
│   │   ├── index.ts - Entry point for server app, contains express server
│   │   ├── models - Code is organized according to their data models in here
│   │   │   └── mainSchemaGQL.ts - Merges all GraphQL schema definitions into one
│   │   └── utils - Utility functions
│   ├── package.json
│   ├── .eslintrc.cjs - ESLint configuration
│   ├── .prettierrc.cjs - Configuration to make code pretty
│   ├── nodemon.json - Configuration for nodemon
│   └── Dockerfile - To build a Docker image
```

### Common Dependencies

- Node 20
- Typescript v5
- express v4

### Client Sh!t

One word: React.

Six more words: Webpack is used to compile it.

Client uses server side rendering (SSR) with the help of Apollo Client. API requests are made via GraphQL.

**What do you know about the following?**

- React 18.2
- Apollo Client v3
- Webpack v5
- GraphQL 16.7

### API Server Sh!t

What more is there to say other than it's an API server.

The Typescript compiler `tsc` is used to compile it.

**What do you know about the following?**

- Apollo Server v4
- GraphQL 16.7
- MongoDB (mongoose)

## Run Locally

This project uses yarn as a package manager. To run on your local machine, clone this to your local and then do the following:

```bash
#!/bin/bash
cd client
yarn install
yarn build
yarn start

cd ..
cd server
yarn install
yarn compile
yarn start
```

and then visit your friendly localhost:3000 in your browser.

### Run in Development Mode

Alternatively, for development there is a 'watch' mode provided for both the client and server application.

`yarn watch` on the client will compile and run the server in watch mode using Webpack Dev Server and nodemon.

`yarn watch` on the server will run the server directly from Typescript (no build) and will compile it into JS on-demand.
